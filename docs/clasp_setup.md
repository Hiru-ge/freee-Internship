# GAS開発環境のCursor移行ガイド

## 1. はじめに

このドキュメントは、既存のGoogle Apps Script (GAS) プロジェクトの開発環境を、AI搭載エディタである **Cursor** とコマンドラインツール **`clasp`** を利用したローカル環境へ移行するための手順を説明します。

### 移行の目的
* Cursorの強力なAI機能（コード生成、リファクタリング支援など）を活用し、開発効率を向上させる。
* Gitによるバージョン管理を導入し、変更履歴の追跡やチームでの共同作業を円滑にする。
* 使い慣れたローカルエディタで開発を行う。

---

## 2. 前提条件

移行作業を始める前に、お使いのPCに以下のソフトウェアがインストールされていることを確認してください。

* **Node.js**: `clasp` を動作させるために必要です。
    * ターミナル（コマンドプロンプト）で `node -v` を実行してバージョンが表示されればインストール済みです。
* **Cursor**: コード編集に使用するエディタです。

---

## 3. 移行手順

### Step 1: `clasp` のセットアップ

`clasp`をインストールし、GASプロジェクトにアクセスできるようにGoogleアカウントで認証します。この作業はPCごとに一度だけ行います。

1.  **`clasp`のインストール**
    ターミナルを開き、以下のコマンドを実行します。
    ```bash
    npm install -g @google/clasp
    ```

2.  **Googleアカウントへのログイン**
    次に、以下のコマンドを実行します。ブラウザが自動的に開き、Googleアカウントへのログインとアクセス許可を求められます。
    ```bash
    clasp login
    ```
    ログイン後、画面の指示に従い **Google Apps Script API** を有効にしてください。

### Step 2: 既存GASプロジェクトのクローン

開発対象のGASプロジェクトを、ローカルPCに複製（クローン）します。

1.  **スクリプトIDの取得**
    ブラウザで対象のGASプロジェクトを開き、左メニューの **[プロジェクトの設定] (歯車アイコン)** をクリックします。表示された画面で **[スクリプト ID]** をコピーします。

2.  **プロジェクトのクローン**
    ターミナルで、プロジェクトを保存したいディレクトリに移動し、以下のコマンドを実行します。
    `<スクリプトID>` の部分を先ほどコピーしたIDに置き換えてください。

    ```bash
    # 例: clasp clone "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" --rootDir ./src
    clasp clone "<スクリプトID>" --rootDir ./src
    ```
    これにより、カレントディレクトリにプロジェクト名のフォルダが作成され、その中の `src` フォルダにコードファイル (`.js`) とマニフェストファイル (`appsscript.json`) がダウンロードされます。

### Step 3: Cursorでの開発とデプロイ

1.  **プロジェクトを開く**
    Cursorを起動し、`clasp clone`で作成されたプロジェクトフォルダを開きます。

2.  **コードを編集する**
    `src` フォルダ内の `.js` ファイルなどを編集します。CursorのAI機能を活用して開発を進めましょう。

3.  **変更をアップロードする**
    コードの編集が完了したら、変更内容をGoogleのサーバーに反映させます。ターミナルでプロジェクトフォルダにいることを確認し、以下のコマンドを実行します。
    ```bash
    clasp push
    ```
    `Files pushed successfully.` と表示されれば成功です。ブラウザ上のGASエディタにも変更が反映されています。

---

## 4. 開発ワークフローとTips

日々の開発でよく使うコマンドです。

* **差分の確認 (`status`)**
    `clasp push` を実行する前に `clasp status` コマンドを使うと、どのファイルに差分があるかを確認でき、意図しない上書きを防げます。

* **サーバーからの変更取得 (`pull`)**
    複数人で開発している場合や、ブラウザ上で何か変更を加えた場合は、`clasp pull` コマンドで最新のコードをローカルに持ってくることができます。

* **ブラウザで開く (`open`)**
    `clasp open` コマンドを実行すると、現在のプロジェクトをブラウザのGASエディタですばやく開くことができます。トリガー設定などに便利です。

* **Gitとの連携**
    `clasp clone`で作成したプロジェクトフォルダで `git init` を実行すれば、すぐにGitでのバージョン管理を開始できます。

これで、Cursorを使ったモダンなGAS開発環境の準備は完了です。