# ユーザーガイド

勤怠管理システムのLINE Bot機能とWebアプリケーションの使い方を詳しく説明します。

## 🌐 Webアプリケーションの使い方

### シフト表の表示
- **初期表示**: 今日の日付を含む週が最初に表示されます
- **週単位表示**: 7日分のシフトが表示されます
- **最後のページ**: その月の最後の7日分が表示されます（翌月は含まれません）
- **ナビゲーション**: 左右の矢印ボタンで週を移動できます

### セレクトボックスの改善
- **幅の拡張**: セレクトボックスの幅が拡張され、長い項目名も適切に表示されます
- **最小幅の設定**: 最小幅200px、最大幅300pxで表示されます

## 📱 基本操作

### LINE Botの追加方法
1. LINEアプリで勤怠管理システムのLINE Botを友達追加
2. 個人チャットで「認証」と入力して従業員アカウントと紐付け
3. グループLINEに招待してシフト管理を開始

### 認証手順
1. **個人チャット**で「認証」と入力
2. 従業員名を入力（例：田中太郎）
3. 認証コードがメールで送信される（数分かかる場合があります）
4. 認証コードを入力して認証完了

## 🎯 利用可能なコマンド

### 基本コマンド

#### ヘルプ
```
ヘルプ
```
- 利用可能なコマンド一覧を表示
- 個人チャット・グループチャット両方で利用可能

#### 認証
```
認証
```
- 従業員アカウントとLINEアカウントを紐付け
- **個人チャットでのみ利用可能**
- 認証後はシフト管理機能が利用可能

#### シフト確認
```
シフト確認
```
- 自分の今月のシフトを確認
- 認証済みユーザーのみ利用可能

#### 全員シフト確認
```
全員シフト確認
```
- 全従業員の今月のシフトを確認
- 認証済みユーザーのみ利用可能

### シフト交代機能

#### 交代依頼
```
交代依頼
```
1. 交代したいシフトの日付を入力（例：12/25）
2. 表示されたシフトから交代したいシフトを選択
3. 交代先の従業員名を入力
4. 確認画面で「はい」を選択して依頼送信

#### 依頼確認
```
依頼確認
```
- 自分に来ている承認待ちの依頼を確認
- 承認・拒否ボタンで処理可能
- 依頼がない場合は「承認待ちの依頼はありません。」と表示

### シフト追加機能（オーナーのみ）

#### 追加依頼
```
追加依頼
```
1. 追加したいシフトの日付を入力（例：12/25）
2. 時間を入力（例：9:00-17:00）
3. 対象従業員を選択（複数選択可能）
4. 確認画面で「はい」を選択して依頼送信

### 欠勤申請機能

#### 欠勤申請
```
欠勤申請
```
1. 欠勤したいシフトの日付を入力（例：12/25）
2. 表示されたシフトから欠勤したいシフトを選択
3. 欠勤理由を入力（例：体調不良のため）
4. 確認画面で「はい」を選択して申請送信

## 💬 チャット別の動作

### 個人チャット
- すべてのコマンドが利用可能
- 認証機能が利用可能
- コマンド以外のメッセージには「コマンドは認識できませんでした」と返答

### グループチャット
- シフト管理機能のみ利用可能
- 認証機能は利用不可（個人チャットで認証が必要）
- コマンド以外のメッセージには返答しない（会話の妨げを避ける）

## 📅 日付・時間の入力形式

### 日付入力
- **月/日形式**：12/25、9/20
- **ゼロパディング**：09/20（推奨）
- **年は自動判定**：12月に1/1と入力すると翌年の1月1日として認識

### 時間入力
- **開始時間-終了時間形式**：9:00-17:00
- **24時間表記**：09:00-17:00（推奨）

## 🔄 会話の流れ

### シフト交代依頼の流れ
```
1. 「交代依頼」と入力
2. 日付入力（例：12/25）
3. シフト選択（Flex Message）
4. 交代先従業員名入力
5. 確認画面で「はい」選択
6. 依頼送信完了
```

### 欠勤申請の流れ
```
1. 「欠勤申請」と入力
2. 日付入力（例：12/25）
3. シフト選択（Flex Message）
4. 欠勤理由入力
5. 確認画面で「はい」選択
6. 申請送信完了
```

## ⚠️ 注意事項

### 認証について
- 認証は個人チャットでのみ可能
- 認証コードはメールで送信されるため、数分かかる場合があります
- 認証コードは有効期限があります

### シフト管理について
- 過去のシフトは選択できません
- 既にシフトがある時間帯は重複チェックされます
- オーナーのみシフト追加機能が利用可能

### エラーメッセージ
- 「認証が必要です」：認証を完了してください
- 「そのコマンドは認識できませんでした」：正しいコマンドを入力してください
- 「日付の形式が正しくありません」：MM/DD形式で入力してください

## 🆘 トラブルシューティング

### よくある問題

#### Q: 認証コードが届かない
A: メールの送信には数分かかる場合があります。しばらく待ってから確認してください。

#### Q: シフトが表示されない
A: 指定した日付にシフトが存在しない可能性があります。正しい日付を入力してください。

#### Q: 交代依頼ができない
A: 過去のシフトは交代依頼できません。未来のシフトを選択してください。

#### Q: グループでコマンドが認識されない
A: 認証は個人チャットで行い、グループではシフト管理機能のみ利用可能です。

## 📞 サポート

問題が解決しない場合は、システム管理者にお問い合わせください。

---

**最終更新日**: 2024年12月
**バージョン**: 1.0.0
