# テスト仕様書

## 概要

GASからRailsへの移行において、機能の完全性を保証するためのテストスイートです。

## テスト構成

### 1. 認証システムテスト
- ログイン・ログアウト
- パスワード変更・忘れ機能

### 2. シフト管理機能テスト
- シフト表示（オーナー・従業員別）
- 月次ナビゲーション
- 103万の壁ゲージ

### 3. シフト交代機能テスト
- シフト交代・追加リクエスト
- 承認・否認機能
- 権限チェック

### 4. 給与管理機能テスト
- 給与計算・表示
- 103万の壁計算
- 時間帯別時給

### 5. ダッシュボード機能テスト
- ダッシュボード表示
- 認証制御

### 6. セキュリティテスト（Phase 6で追加）
- **セッションタイムアウトテスト**: 24時間後の自動ログアウト
- **CSRF保護テスト**: クロスサイトリクエストフォージェリ攻撃の防止
- **入力値検証テスト**: 不正な入力値の検証
- **権限チェックテスト**: 不正な権限昇格の防止
- **外部キー制約テスト**: データ整合性の保証
- **データベースインデックステスト**: パフォーマンスの確認

### 7. 給与計算サービステスト
- 時間帯別勤務時間計算
- 月次集計
- エラーハンドリング

### 8. シフト重複チェックサービステスト
- シフト重複チェック
- 境界値テスト
- エラーハンドリング

## テストデータ

### フィクスチャ
- `owner`: 店長（employee_id: '3313254'）
- `employee1`: 従業員1（employee_id: '3316120'）
- `employee2`: 従業員2（employee_id: '3317741'）

## テスト実行

```bash
# 全テスト実行
rails test

# 特定のテストファイル実行
rails test test/controllers/auth_controller_test.rb
```

## テスト結果

- **総テスト数**: 70テスト
- **成功**: 70テスト
- **失敗**: 0テスト
- **エラー**: 0テスト

## 品質保証

- GAS互換性の確認
- エラーハンドリングのテスト
- 権限チェックの検証
- 並列実行による高速化

---
