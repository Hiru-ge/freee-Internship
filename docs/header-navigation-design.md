# ヘッダーナビゲーション設計書

## 概要
勤怠管理システムに統一されたヘッダーナビゲーションを導入し、ユーザー体験の一貫性と使いやすさを向上させる。

## 設計方針

### 1. シンプルで直感的
- 主要な機能へのアクセスを1クリックで実現
- 視覚的に分かりやすいアイコンとラベル
- 最小限のメニュー項目で混乱を避ける

### 2. レスポンシブ対応
- デスクトップ: 横並びメニュー
- タブレット: 適応的レイアウト
- モバイル: ハンバーガーメニュー

### 3. 権限管理
- ユーザーロール（オーナー/従業員）に応じた表示制御
- アクセス権限のない機能は非表示

## ヘッダー構成

### デスクトップ版
```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│ 勤怠管理システム    [ダッシュボード] [シフト] [パスワード変更] [ログアウト]    田中太郎さん [従業員] │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

### モバイル版
```
┌─────────────────────────────────────┐
│ 勤怠管理    [☰]    田中太郎さん     │
├─────────────────────────────────────┤
│ [ダッシュボード]                    │
│ [シフト]                            │
│ [パスワード変更]                    │
│ [ログアウト]                        │
└─────────────────────────────────────┘
```

## メニュー項目詳細

### 1. ロゴ・ブランド
- **表示**: 勤怠管理システム
- **機能**: ダッシュボードへのリンク
- **レスポンシブ**: モバイルでは「勤怠管理」に短縮

### 2. ダッシュボード
- **表示**: ダッシュボード
- **機能**: メインページ（打刻機能）
- **権限**: 全ユーザー
- **アクティブ状態**: 現在のページをハイライト

### 3. シフト
- **表示**: シフト
- **機能**: シフト表と給与ゲージ
- **権限**: 全ユーザー
- **サブメニュー**: なし（シンプル化）

### 4. パスワード変更
- **表示**: パスワード変更
- **機能**: パスワード変更
- **権限**: 全ユーザー
- **サブメニュー**: なし

### 5. ログアウト
- **表示**: ログアウト
- **機能**: セッション終了
- **権限**: 全ユーザー
- **確認**: ログアウト確認ダイアログ

### 6. ユーザー情報表示
- **表示**: ユーザー名 [ロール]
- **機能**: 現在ログインしているユーザーの表示
- **権限**: 全ユーザー
- **位置**: ヘッダー右端（デスクトップ）、モバイルメニュー内

## 技術実装

### 1. HTML構造
```html
<header class="main-header">
  <div class="header-container">
    <div class="logo">
      <a href="<%= dashboard_path %>">
        <span class="logo-text">勤怠管理システム</span>
      </a>
    </div>
    
    <nav class="main-navigation">
      <ul class="nav-list">
        <li class="nav-item">
          <a href="<%= dashboard_path %>" class="nav-link <%= 'active' if current_page?(dashboard_path) %>">
            <span class="nav-text">ダッシュボード</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="<%= shifts_path %>" class="nav-link <%= 'active' if current_page?(shifts_path) %>">
            <span class="nav-text">シフト</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="<%= password_change_path %>" class="nav-link <%= 'active' if current_page?(password_change_path) %>">
            <span class="nav-text">パスワード変更</span>
          </a>
        </li>
        <li class="nav-item">
          <%= form_with url: logout_path, method: :post, local: true, class: "logout-form" do |form| %>
            <%= form.submit "ログアウト", class: "nav-link logout-link" %>
          <% end %>
        </li>
      </ul>
    </nav>
    
    <!-- ユーザー情報表示 -->
    <div class="user-info">
      <span class="user-name"><%= @employee_name %></span>
      <span class="user-role">[<%= @is_owner ? 'オーナー' : '従業員' %>]</span>
    </div>
    
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
      <span class="hamburger-icon">☰</span>
    </button>
  </div>
</header>
```


## 実装手順

### Step 1: ヘッダーコンポーネント作成（フロントエンドのみ）
1. `app/views/shared/_header.html.erb` の作成
2. 基本的なHTML構造の実装（既存コンポーネント活用）
3. スタイリングの適用（既存カラーパレット活用）

### Step 2: レイアウトファイル更新（フロントエンドのみ）
1. `app/views/layouts/application.html.erb` の更新
2. ヘッダーコンポーネントの読み込み
3. 既存のナビゲーション削除

### Step 3: レスポンシブ対応（フロントエンドのみ）
1. モバイルメニューの実装
2. ハンバーガーメニューの動作確認
3. 各デバイスでの表示テスト

### Step 4: 権限管理実装（フロントエンドのみ）
1. オーナー権限の表示制御
2. アクティブ状態の管理
3. ログアウト機能の統合

### Step 5: テストと調整
1. 全画面での表示確認
2. ナビゲーション動作テスト
3. パフォーマンス最適化

### 実装範囲
**このヘッダーナビゲーション導入はフロントエンドのみの変更で十分実現可能です。**
- 既存のコントローラー・サービス・APIをそのまま活用
- ビューファイル（HTML/CSS/JavaScript）の変更のみ
- 新規のバックエンド開発は不要

## 期待される効果

### 1. ユーザビリティ向上
- 一貫したナビゲーション体験
- 直感的な操作フロー
- 学習コストの削減

### 2. 開発効率向上
- 共通コンポーネントの活用
- メンテナンス性の向上
- 一貫したデザインシステム

### 3. アクセシビリティ改善
- キーボードナビゲーション対応
- スクリーンリーダー対応
- タッチデバイス最適化

## まとめ
このヘッダーナビゲーション設計により、ユーザーにとってより使いやすく、開発者にとってより保守しやすい勤怠管理システムを実現する。
