# 勤怠管理システム

## 概要

突発的なシフト交代が頻発する小規模飲食店を救う勤怠管理システムです。既存のグループLINEでのシフト交代連携を維持しながら、システムとの自動連携を実現するLINE Bot機能を提供します。

## 主な機能

### Webアプリケーション
- **認証システム**: freee API連携による従業員認証
- **シフト管理**: シフトの確認、追加、変更
- **シフト交代**: シフト交代依頼の送信・承認・否認
- **勤怠管理**: 打刻機能、勤怠履歴の確認
- **給与管理**: 103万の壁ゲージ表示

### LINE Bot連携
- **認証システム**: 従業員名入力による認証
- **シフト確認**: 個人・全従業員のシフト確認
- **シフト交代**: 日付入力による絞り込み方式でのシフト交代依頼
- **シフト追加**: 新しいシフトの追加依頼（実装予定）
- **リクエスト確認**: 承認待ちリクエストの確認

## 技術スタック

- **フロントエンド**: HTML/CSS/JavaScript
- **バックエンド**: Ruby on Rails 8.0.2
- **データベース**: SQLite3
- **デプロイ**: Fly.io
- **外部API**: freee API、LINE Messaging API
- **メール送信**: Gmail SMTP

## 実装状況

### ✅ 完了済み機能
- 認証システム（freee API連携）
- シフト管理機能
- シフト交代機能
- LINE Bot基本機能
- メール通知機能
- 本番環境デプロイ

### 🔄 実装予定機能
- シフト追加リクエスト機能（LINE Bot経由）

### ✅ 修正完了
- Webアプリ上でのシフト交代リクエスト承認・否認機能の不具合修正（TDD手法で実装）

### 🔴 緊急修正予定
- 打刻機能のタイムゾーンずれ修正

## ドキュメント

### 実装関連
- [実装状況レポート](docs/implementation-status.md)
- [実装詳細](docs/implementation-details.md)
- [データベース設計](docs/schema-database.md)

### LINE Bot関連
- [LINE Bot連携機能仕様書](docs/line-integration.md)
- [LINE Bot API仕様書](docs/line_bot_api_spec.md)
- [LINE Bot実装状況](docs/line_bot_current_status.md)
- [LINE Botデータベース設計](docs/line_bot_database_design.md)
- [LINE Botデプロイ手順書](docs/line_bot_deployment.md)
- [シフト追加リクエスト機能仕様書](docs/line_bot_shift_addition_spec.md)

### 運用関連
- [デプロイガイド](docs/DEPLOYMENT_GUIDE.md)
- [セットアップガイド](docs/setup-guide.md)
- [テスト仕様](docs/testing.md)

### 仕様関連
- [要件定義](docs/requirement.md)
- [画面設計](docs/screen-design.md)
- [API仕様](docs/api-specification.md)

## 開発状況

### 最新の更新（2025年1月）
- **シフト交代リクエスト承認・否認機能の修正完了**（TDD手法で実装）
- メール通知機能の修正完了
- メール文言の改善（LINEコマンド案内追加）
- シフト交代機能の改善（従業員名のみ対応、ID指定機能削除）

### テスト状況
- **87テスト実行**
- **257アサーション**
- **0失敗、0エラー、0スキップ**
- **TDD手法**: Red-Green-Refactorサイクルで実装
- **新規追加**: シフト交代承認・否認機能の包括的テストスイート

## セキュリティ

- 認証コードによる安全なアカウント紐付け
- 有効期限付きの会話状態管理
- 適切なアクセス制御
- 機密情報の環境変数管理

## 運用

### 本番環境
- **URL**: [本番環境URL]
- **デプロイ**: Fly.io
- **監視**: ヘルスチェック、ログ監視

### メンテナンス
- 定期チェック項目の確認
- エラーログの監視
- パフォーマンスメトリクスの確認

## ライセンス

[ライセンス情報]

## 連絡先

[連絡先情報]
