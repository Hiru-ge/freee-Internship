<div class="shift-page-container <%= @is_owner ? 'owner-mode' : 'employee-mode' %>"
     data-employee-id="<%= @employee_id %>"
     data-is-owner="<%= @is_owner %>"
     data-shifts-data-path="<%= shifts_path %>"
     data-employees-wages-path="<%= wages_employees_path %>"
     data-all-wages-path="<%= wages_path %>"
     data-wage-info-path="<%= wages_path %>"
     data-new-shift-exchange-path="<%= shift_exchange_new_path %>"
     data-new-shift-deletion-path="<%= shift_deletion_new_path %>"
     data-shift-approvals-path="<%= shift_approvals_path %>"
     data-new-shift-addition-path="<%= shift_addition_new_path %>">
  <h1>シフトページ</h1>


  <!-- シフト表 -->
  <div class="shift-calendar-section">
    <h2>シフト表</h2>
    <p>交代を依頼したい<strong>自分のシフト</strong>をクリックすると、依頼フォームへ遷移します。<br>
    <small class="help-text">※ 黄色で表示されているシフトがクリック可能です</small></p>

    <!-- シフト管理ボタン -->
    <div class="shift-management">
      <button class="button" onclick="goToRequestList()">自分へのリクエスト一覧</button>
      <button class="button" onclick="goToDeletionForm()">欠勤申請</button>
      <button id="shift-add-btn" class="button owner-only hidden" onclick="goToShiftAddForm()">シフト追加依頼</button>
    </div>

    <div class="month-navigation">
      <h3 id="calendar-title"></h3>
      <div class="month-navigation-buttons">
        <button class="button small-button" onclick="prevWeek()"><</button>
        <button class="button small-button" onclick="nextWeek()">></button>
      </div>
    </div>

    <div id="shift-calendar-container">
      <p>シフト情報を読み込んでいます...</p>
    </div>
  </div>

  <!-- 従業員一覧と103万の壁ゲージ（オーナーのみ） -->
  <% if @is_owner %>
  <div id="employee-list-section" class="employee-list-section">
    <h2>全従業員の給与状況</h2>
    <table border="1" class="employee-list">
      <thead>
        <tr>
          <th>従業員名</th>
          <th>給与状況（103万の壁ゲージ）</th>
        </tr>
      </thead>
      <tbody id="employee-list-body">
        <tr><td colspan="2">読み込み中...</td></tr>
      </tbody>
    </table>
  </div>
  <% end %>

  <!-- 個人の103万の壁ゲージ（従業員のみ） -->
  <% unless @is_owner %>
  <div id="personal-gauge-section" class="personal-gauge-section">
    <h2>103万の壁ゲージ <span class="help-text small">※</span></h2>
    <p class="help-text">※このゲージ状態は、すでに入っているシフトをもとに計算されています</p>
    <div class="wage-gauge" id="personal-wage-gauge">
      <div class="gauge-container">
        <div class="gauge-bar">
          <div class="gauge-fill" style="width: 0%"></div>
        </div>
        <div class="gauge-text">読み込み中...</div>
      </div>
    </div>
  </div>
  <% end %>

  <!-- メッセージ表示 -->
  <div id="message" class="message hidden"></div>
</div>

<%= javascript_include_tag 'shift_display' %>
